<!DOCTYPE html>
<html lang="en-us">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Automator application to run script as root | My Thoughts</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="I was recently asked to create a shortcut on our users&rsquo; Desktops to kick off the High Sierra install. We are caching the installer through our management system. In the past I have created a shortcut to the installer on their Desktop, but that required them to click through the many continue buttons. This method will use the startosinstall script from Slack member @bp to start the install with minimal user interaction. I wrap that shell script (with the appropriate modifications for my environment) in an Automator application, but to have the script run as root, I call it with Run AppleScript using the do shell script ... with administrator privileges form.  The full AppleScript is">
    <meta name="generator" content="Hugo 0.135.0">
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >



    

    
      

    

    

    
      <link rel="canonical" href="http://localhost:1313/posts/automator-application-to-run-script-as-root/">
    

    <meta property="og:url" content="http://localhost:1313/posts/automator-application-to-run-script-as-root/">
  <meta property="og:site_name" content="My Thoughts">
  <meta property="og:title" content="Automator application to run script as root">
  <meta property="og:description" content="I was recently asked to create a shortcut on our users’ Desktops to kick off the High Sierra install. We are caching the installer through our management system. In the past I have created a shortcut to the installer on their Desktop, but that required them to click through the many continue buttons. This method will use the startosinstall script from Slack member @bp to start the install with minimal user interaction. I wrap that shell script (with the appropriate modifications for my environment) in an Automator application, but to have the script run as root, I call it with Run AppleScript using the do shell script ... with administrator privileges form. The full AppleScript is">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2017-12-12T15:36:31+00:00">
    <meta property="article:modified_time" content="2017-12-12T15:36:31+00:00">
    <meta property="article:tag" content="Automator">
    <meta property="article:tag" content="High Sierra">
    <meta property="article:tag" content="OS X General">
    <meta property="article:tag" content="Shell Script">

  <meta itemprop="name" content="Automator application to run script as root">
  <meta itemprop="description" content="I was recently asked to create a shortcut on our users’ Desktops to kick off the High Sierra install. We are caching the installer through our management system. In the past I have created a shortcut to the installer on their Desktop, but that required them to click through the many continue buttons. This method will use the startosinstall script from Slack member @bp to start the install with minimal user interaction. I wrap that shell script (with the appropriate modifications for my environment) in an Automator application, but to have the script run as root, I call it with Run AppleScript using the do shell script ... with administrator privileges form. The full AppleScript is">
  <meta itemprop="datePublished" content="2017-12-12T15:36:31+00:00">
  <meta itemprop="dateModified" content="2017-12-12T15:36:31+00:00">
  <meta itemprop="wordCount" content="385">
  <meta itemprop="keywords" content="Automator,High Sierra,OS X General,Shell Script">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Automator application to run script as root">
  <meta name="twitter:description" content="I was recently asked to create a shortcut on our users’ Desktops to kick off the High Sierra install. We are caching the installer through our management system. In the past I have created a shortcut to the installer on their Desktop, but that required them to click through the many continue buttons. This method will use the startosinstall script from Slack member @bp to start the install with minimal user interaction. I wrap that shell script (with the appropriate modifications for my environment) in an Automator application, but to have the script run as root, I call it with Run AppleScript using the do shell script ... with administrator privileges form. The full AppleScript is">

	
  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        My Thoughts
      
    </a>
    <div class="flex-l items-center">
      

      
      
<div class="ananke-socials">
  
</div>

    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked ttu">
          
        Posts
      </aside>
      










  <div id="sharing" class="mt3 ananke-socials">
    
  </div>


      <h1 class="f1 athelas mt3 mb1">Automator application to run script as root</h1>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2017-12-12T15:36:31Z">December 12, 2017</time>
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><p>I was recently asked to create a shortcut on our users&rsquo; Desktops to kick off the High Sierra install. We are caching the installer through our management system. In the past I have created a shortcut to the installer on their Desktop, but that required them to click through the many continue buttons. This method will use the startosinstall script from <a href="https://github.com/bp88/JSS-Scripts/blob/master/OS_Upgrade.sh">Slack member @bp</a> to start the install with minimal user interaction. I wrap that shell script (with the appropriate modifications for my environment) in an Automator application, but to have the script run as root, I call it with Run AppleScript using the <code>do shell script ... with administrator privileges</code> form. <img src="https://sneakypockets.wordpress.com/wp-content/uploads/2017/12/automatorinstaller.png" alt="AutomatorInstaller.png"> The full AppleScript is</p>
<blockquote>
<p><code>on run {input, parameters} set myPath to POSIX path of (path to me) set upgradeScript to myPath &amp; &quot;Contents/Resources/HighSierra_Upgrade.sh&quot; do shell script quoted form of upgradeScript with administrator privileges return input end run</code></p>
</blockquote>
<p>First the script finds the path to the Automator application and then I define the script to run based on that. This lets me embed the script in the application itself for easy deployment. To embed the script, save the Automator application somewhere. Then right click it and choose Show Package Contents. This will open a Contents folder. Expand that and find Resources. Copy the shell script into there. Keep in mind any time you change the Automator workflow and re-save you will need to re-copy the script into the application bundle. <img src="https://sneakypockets.wordpress.com/wp-content/uploads/2017/12/applicationbundle.png" alt="ApplicationBundle.png"> Then to finish off the application to look nice, open the Get Info window of the application and of the actually Install macOS High Sierra.app. Click once on the icon of the real installer to highlight it and copy it (command-C). Then click once on the icon of our Automator application to select it and paste the copied icon (command-V). Now our application has the nice installer icon for it. <img src="https://sneakypockets.wordpress.com/wp-content/uploads/2017/12/copyicon.png" alt="CopyIcon.png"> When the user runs this they will prompted for the credentials to run the script as root. Then they will be prompted by the script for their password to setup a FileVault authenticated restart. If I could figure out a way to combine those, it would make the process smoother, but I&rsquo;m not sure if it is possible. <img src="https://sneakypockets.wordpress.com/wp-content/uploads/2017/12/authforsudo.png" alt="AuthForsudo.png"> <img src="https://sneakypockets.wordpress.com/wp-content/uploads/2017/12/authforrestart.png" alt="AuthForRestart.png"> <img src="https://sneakypockets.wordpress.com/wp-content/uploads/2017/12/pleasewait.png" alt="PleaseWait.png"> After that, the system reboots and the user sees the standard &lsquo;Installing: About X minutes remaining&rsquo;.</p>
<ul class="pa0">
  
   <li class="list di">
     <a href="/tags/automator/" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Automator</a>
   </li>
  
   <li class="list di">
     <a href="/tags/high-sierra/" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">High Sierra</a>
   </li>
  
   <li class="list di">
     <a href="/tags/os-x-general/" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">OS X General</a>
   </li>
  
   <li class="list di">
     <a href="/tags/shell-script/" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Shell Script</a>
   </li>
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




  <div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
    <p class="f5 b mb3">Related</p>
    <ul class="pa0 list">
	   
	     <li  class="mb2">
          <a href="/posts/signing-installer-packages-with-automator/">Signing Installer Packages with Automator</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/posts/mounting-file-shares-based-on-ad-group-membership-using-enterprise-connect/">Mounting File Shares Based on AD Group Membership using Enterprise Connect</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/posts/using-ldapsearch-to-get-ad-data/">Using ldapsearch to get AD data</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/posts/update-to-network-geektool-script/">Update to network GeekTool script</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/posts/find-the-most-common-user-on-a-system/">Find the most common user on a system</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/posts/using-installer-choices-xml-to-modify-anyconnect-and-mcafee-deployments/">Using installer choices.xml to modify AnyConnect and McAfee deployments</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/posts/macos-sierra-recovery-hd-changes/">macOS Sierra Recovery HD Changes</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/posts/unhide-users-in-10-9-3/">Unhide /Users in 10.9.3</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/posts/keyboard-shortcut-for-system-preferences/">Keyboard shortcut for System Preferences</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/posts/control-if-a-window-opens-when-a-volume-mounts/">Control if a window opens when a volume mounts</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/posts/get-the-path-of-file-onto-the-clipboard/">Get the path of file onto the clipboard</a>
        </li>
	    
    </ul>
</div>

</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="http://localhost:1313/" >
    &copy;  Eric Hemmeter 2024 
  </a>
    <div>
<div class="ananke-socials">
  
</div>
</div>
  </div>
</footer>

  </body>
</html>
