<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Swift on My Thoughts</title>
    <link>http://localhost:1313/tags/swift/</link>
    <description>Recent content in Swift on My Thoughts</description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <copyright>Eric Hemmeter</copyright>
    <lastBuildDate>Mon, 03 Jul 2023 09:52:00 +0000</lastBuildDate>
    <atom:link href="http://localhost:1313/tags/swift/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Swift mountshare command line tool</title>
      <link>http://localhost:1313/posts/swift-mountshare-command-line-tool/</link>
      <pubDate>Mon, 03 Jul 2023 09:52:00 +0000</pubDate>
      <guid>http://localhost:1313/posts/swift-mountshare-command-line-tool/</guid>
      <description>&lt;p&gt;There have been many times over the years of my career where I have wanted to script mounting a file share for a user. There are several ways to make this happen from manually adding a file share to a user&amp;rsquo;s Login Items, using AppleScript, and scripting the &lt;code&gt;mount&lt;/code&gt; command. Eventually I found and settled on using a python script with the python objc bridge from an &lt;a href=&#34;https://gist.github.com/pudquick/1362a8908be01e23041d&#34;&gt;old frogor/pudquick gist&lt;/a&gt;. This worked great with the built in python on macOS and uses the same bits of the OS that the Connect to Server… dialog does. I was able to &lt;a href=&#34;https://sneakypockets.wordpress.com/2016/09/26/mounting-file-shares-based-on-ad-group-membership-using-enterprise-connect/&#34;&gt;automatically mount shares based on AD group&lt;/a&gt; at a previous job using this script. Eventually Apple stopped including python in macOS, so I had to &lt;a href=&#34;https://github.com/macadmins/python&#34;&gt;install another one&lt;/a&gt;. There were some modifications needed to make it work with python 3 (see the comments on the gist) and installing python everywhere for this one thing seemed like overkill. So I started working on a Swift implementation using &lt;a href=&#34;https://swiftpackageindex.com/apple/swift-argument-parser/1.2.2/documentation/argumentparser&#34;&gt;swift argument parser&lt;/a&gt;. Since the python script calls into the system a lot of the pieces were already laid out and then I found a mosen &lt;a href=&#34;https://gist.github.com/mosen/2ddf85824fbb5564aef527b60beb4669&#34;&gt;gist that laid out basically all the options and proper terms&lt;/a&gt;.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Shell to Swift with a bit of Python</title>
      <link>http://localhost:1313/posts/shell-to-swift-with-a-bit-of-python/</link>
      <pubDate>Mon, 29 Jul 2019 16:13:56 +0000</pubDate>
      <guid>http://localhost:1313/posts/shell-to-swift-with-a-bit-of-python/</guid>
      <description>&lt;p&gt;This is probably the first of a couple of posts about this project. There are a couple of things I learned I want to expand on, but don&amp;rsquo;t want to make this too long. So this will be an overview of the project. For years I have had a &lt;a href=&#34;https://sneakypockets.wordpress.com/2015/05/05/update-to-network-geektool-script/&#34;&gt;shell script&lt;/a&gt; that collected some network info and it was displayed on my desktop using &lt;a href=&#34;http://mutablecode.com/apps/nerdtool.html&#34;&gt;NerdTool&lt;/a&gt; and then &lt;a href=&#34;https://www.tynsoe.org/v2/geektool/&#34;&gt;GeekTool&lt;/a&gt;. While testing macOS Catalina betas, GeekTool hasn&amp;rsquo;t been working for me. The other concern with these options is that they run the shell script on a schedule which can be much to frequent or not frequent enough.  So I &lt;a href=&#34;https://github.com/ehemmete/NetworkInfoGUI&#34;&gt;rewrote it with Xcode in Swift&lt;/a&gt;. I have &lt;a href=&#34;https://sneakypockets.wordpress.com/2019/04/15/using-a-swift-app-to-get-rid-of-lots-of-applescript-dialogs/&#34;&gt;recently been doing more with Swift&lt;/a&gt; and was inspired by &lt;a href=&#34;https://psumac2019.sched.com/event/KQo3/swift-xcode-an-app-and-you&#34;&gt;Macshome&amp;rsquo;s workshop at PSU MacAdmin 2019&lt;/a&gt;. In that workshop he showed off a nice Swift function for running shell scripts (he planned to opensource the workshop code, so I will link to it when I can). He also demonstrated how to store functions in one file and reference them in another which made for much cleaner and transportable code. I started with that and reproduced my network info output and that was working well. At this point the program was a cli command. &lt;img src=&#34;https://sneakypockets.wordpress.com/wp-content/uploads/2019/07/screen-shot-2019-07-26-at-8.38.25-pm-1.png&#34; alt=&#34;Screen Shot 2019-07-26 at 8.38.25 PM.png&#34;&gt;While it worked well in the terminal, I wanted to have the output available at a glance. I created a new Xcode project to create a GUI version. Because I had all my functions in a separate NetworkInfo.swift file, I was able to drag that into the GUI project and call them from there.  The main parts of the project now relied on ​​&lt;code&gt;​networksetup&lt;/code&gt; to find all the network services and get the ip addresses of the active services and &lt;a href=&#34;https://github.com/ehemmete/NetworkInfoGUI/blob/master/NetworkFunctions(shell-based).swift&#34;&gt;looked like this&lt;/a&gt;. Then I was further inspired by &lt;a href=&#34;https://macadmins.slack.com/archives/C056UTQ3M/p1563909962029100&#34;&gt;zakes&lt;/a&gt; and &lt;a href=&#34;https://macadmins.slack.com/archives/C056UTQ3M/p1563914551039800&#34;&gt;frogor&lt;/a&gt; in #python in the &lt;a href=&#34;http://macadmins.org&#34;&gt;MacAdmin Slack&lt;/a&gt; to try to use more native calls instead of shell commands.  They were using PyObjC to call native macOS methods, so it was pretty straight forward to use them in Swift after a bit of reading the documentation. I also got some help from &lt;a href=&#34;https://macadmins.slack.com/archives/C0688BNEM/p1563637834003600&#34;&gt;bp&lt;/a&gt; in #swift on getting nicer output from some of the methods. At this point, I could print all the output I wanted nicely, but only when the application is launched. I found &lt;a href=&#34;https://developer.apple.com/documentation/network/nwpathmonitor&#34;&gt;NWPathMonitor in Apple&amp;rsquo;s documentation&lt;/a&gt; and with some trial and error, I was able to get the function to update the UI whenever the network state on the Mac changed.&lt;img src=&#34;https://sneakypockets.wordpress.com/wp-content/uploads/2019/07/screen-shot-2019-07-26-at-8.56.45-pm.png&#34; alt=&#34;Screen Shot 2019-07-26 at 8.56.45 PM.png&#34;&gt; By moving from shell calls to native methods, the code runs much faster.  Using &lt;code&gt;time&lt;/code&gt; to compare the two commands, the ProcessRunner version runs in 1.155s while the native command version runs in .243s. Certainly not a huge deal for something this simple, but shows the benefit of using the native tools when possible. Another benefit is that by using a native wrapping label in a standard window, the network info is now selectable and copyable. In another post, I plan to describe the structure of the project and how it monitors for network changes.  I also hope to figure out how to use the macOS native controls to allow a user to adjust the fonts, colors, and opacity of the display.  Finally, I would like to include the cli command in the GUI bundle, so it can be called from Terminal if needed.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Using a Swift app to get rid of lots of AppleScript dialogs</title>
      <link>http://localhost:1313/posts/using-a-swift-app-to-get-rid-of-lots-of-applescript-dialogs-comments/</link>
      <pubDate>Mon, 15 Apr 2019 13:17:32 +0000</pubDate>
      <guid>http://localhost:1313/posts/using-a-swift-app-to-get-rid-of-lots-of-applescript-dialogs-comments/</guid>
      <description>&lt;h4 id=&#34;heading&#34;&gt;&lt;/h4&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://www.arminip.com/&#34; title=&#34;mtentor@arminip.com&#34;&gt;Marty Tentor&lt;/a&gt; - &lt;!-- raw HTML omitted --&gt;Feb 5, 2021&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;&#xA;&lt;p&gt;Thanks for the example. I have a similar challenge, getting a one window gui for applescipt. Just want to confirm that you are using Swift to generate text files and then running Applescript to get the data from the text files and running the real work on the targeted application. Is the Applescript being run separately,(called by the user) or is the Applescript call coming from within the Swift program?&lt;/p&gt;</description>
    </item>
    <item>
      <title>Using a Swift app to get rid of lots of AppleScript dialogs</title>
      <link>http://localhost:1313/posts/using-a-swift-app-to-get-rid-of-lots-of-applescript-dialogs/</link>
      <pubDate>Mon, 15 Apr 2019 13:17:32 +0000</pubDate>
      <guid>http://localhost:1313/posts/using-a-swift-app-to-get-rid-of-lots-of-applescript-dialogs/</guid>
      <description>&lt;p&gt;There was recently a discussion in #bash in the &lt;a href=&#34;https://macadmins.org&#34;&gt;MacAdmin Slack&lt;/a&gt; about better ways to handle multiple dialogs for gathering info from users or techs.  In my company&amp;rsquo;s provisioning process we want to collect a number of things to be picked up by our inventory system (BigFix).  This started with a set of AppleScript Display Dialogs.&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://sneakypockets.wordpress.com/wp-content/uploads/2019/04/applescriptpopups.2019-04-13-12_40_20.gif&#34; alt=&#34;AppleScriptPopUps.2019-04-13 12_40_20.gif&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;This is not a great experience and gets worse as we try to make it less error prone (do you see the mistake?). To make this better for our techs, I wrote a relatively simple Swift application.  I didn&amp;rsquo;t/don&amp;rsquo;t have much Swift experience (just playing around in Playgrounds, a few simple tutorials), so I can&amp;rsquo;t say this is the &amp;ldquo;right&amp;rdquo; way to do this, but it works for me/our process.&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
